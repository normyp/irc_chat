<!DOCTYPE html>
<html>
    <head>
        <title>UDP Terminal</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.1.0/css/xterm.css" />
        <script src="https://cdn.jsdelivr.net/npm/xterm@5.1.0/lib/xterm.js"></script>
        <style>
            body {
                margin: 0;
                padding: 20px;
                background: #1e1e1e;
                height: 100vh;
                display: flex;
                flex-direction: column;
            }
            #terminal {
                flex-grow: 1;
                background: #000;
                padding: 10px;
                border-radius: 5px;
            }
            form {
                margin-top: 10px;
                display: flex;
                gap: 10px;
            }
            input {
                flex-grow: 1;
                padding: 8px;
                background: #2d2d2d;
                border: 1px solid #3d3d3d;
                color: #fff;
                border-radius: 4px;
            }
            button {
                padding: 8px 20px;
                background: #0066cc;
                border: none;
                color: white;
                border-radius: 4px;
                cursor: pointer;
            }
            button:hover {
                background: #0052a3;
            }
        </style>
    </head>
    <body>
        <div id="terminal"></div>
        <form id="form">
            <input id="input" autocomplete="off" placeholder="Type a message..." />
            <button type="submit">Send</button>
        </form>
    
        <script>
            const term = new Terminal({
                cursorBlink: true,
                theme: {
                    background: '#000',
                    foreground: '#fff'
                },
                rows: 24,
                cols: 80
            });
            term.open(document.getElementById('terminal'));
            
            const form = document.getElementById('form');
            const input = document.getElementById('input');
            
            // Connect to WebSocket
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const socket = new WebSocket(`${wsProtocol}//${location.host}`);
            
            // Handle raw terminal output
            socket.onmessage = (event) => {
                term.write(event.data);
            };

            form.onsubmit = (e) => {
                e.preventDefault();
                if (input.value && socket.readyState === WebSocket.OPEN) {
                    socket.send(input.value);
                    input.value = '';
                }
            };
        </script>
    </body>
</html>